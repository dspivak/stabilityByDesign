\documentclass[11pt, one side, article]{memoir}


\settrims{0pt}{0pt} % page and stock same size
\settypeblocksize{*}{35.3pc}{*} % {height}{width}{ratio}
\setlrmargins{*}{*}{1} % {spine}{edge}{ratio}
\setulmarginsandblock{.98in}{.98in}{*} % height of typeblock computed
\setheadfoot{\onelineskip}{2\onelineskip} % {headheight}{footskip}
\setheaderspaces{*}{1.5\onelineskip}{*} % {headdrop}{headsep}{ratio}
\checkandfixthelayout


\usepackage{amsthm}
\usepackage{mathtools}

\usepackage[inline]{enumitem}
\usepackage{ifthen}
\usepackage[utf8]{inputenc} %allows non-ascii in bib file
\usepackage{xcolor}

\usepackage[backend=biber, backref=true, maxbibnames = 10, style = alphabetic]{biblatex}
\usepackage[bookmarks=true, colorlinks=true, linkcolor=blue!50!black,
citecolor=orange!50!black, urlcolor=orange!50!black, pdfencoding=unicode]{hyperref}
\usepackage[capitalize]{cleveref}

\usepackage{tikz}

\usepackage{amssymb}
\usepackage{newpxtext}
\usepackage[varg,bigdelims]{newpxmath}
\usepackage{mathrsfs}
\usepackage{dutchcal}
\usepackage{fontawesome}
\usepackage{ebproof}
\usepackage{stmaryrd}
\usepackage{float}

% cleveref %
  \newcommand{\creflastconjunction}{, and\nobreakspace} % serial comma
  \crefformat{enumi}{\card#2#1#3}
  \crefalias{chapter}{section}


% biblatex %
  \addbibresource{Library20231216.bib} 


% hyperref %
  \hypersetup{final}

% enumitem %
  \setlist{nosep}
  \setlistdepth{6}



% tikz %



  \usetikzlibrary{ 
  	cd,
  	math,
  	decorations.markings,
		decorations.pathreplacing,
  	positioning,
  	arrows.meta,
  	shapes,
		shadows,
		shadings,
  	calc,
  	fit,
  	quotes,
  	intersections,
    circuits,
    circuits.ee.IEC
  }
  

\tikzset{
	tick/.style={postaction={
  	decorate,
    decoration={markings, mark=at position 0.5 with
    	{\draw[-] (0,.4ex) -- (0,-.4ex);}}}
  }
} 
\tikzset{
	slash/.style={postaction={
  	decorate,
    decoration={markings, mark=at position 0.5 with
    	{\node[font=\footnotesize] {\rotatebox{90}{$\sim$}};}}}
  }
} 

% Adjunctions
\newcommand{\adj}[5][30pt]{%[size] Cat L, Left, Right, Cat R.
\begin{tikzcd}[ampersand replacement=\&, column sep=#1]
  #2\ar[r, shift left=4.5pt, "#3"]
  \ar[r, phantom, "\scriptstyle\Rightarrow"]\&
  #5\ar[l, shift left=4.5pt, "#4"]
\end{tikzcd}
}

\newcommand{\adjr}[5][30pt]{%[size] Cat R, Right, Left, Cat L.
\begin{tikzcd}[ampersand replacement=\&, column sep=#1]
  #2\ar[r, shift left=7pt, "#3"]\&
  #5\ar[l, shift left=7pt, "#4"]
  \ar[l, phantom, "\scriptstyle\Leftarrow"]
\end{tikzcd}
}

\newcommand{\adjpos}[6][30pt]{%[size] Cat L, Left, Right, Cat R.
\begin{tikzcd}[ampersand replacement=\&, column sep=#1]
  #2\ar[r, shift left=4.5pt, "#3"]
  \ar[r, phantom, "\scriptstyle#6"]\&
  #5\ar[l, shift left=4.5pt, "#4"]
\end{tikzcd}
}

\newcommand{\adjrpos}[6][30pt]{%[size] Cat R, Right, Left, Cat L.
\begin{tikzcd}[ampersand replacement=\&, column sep=#1]
  #2\ar[r, shift left=7pt, "#3"]\&
  #5\ar[l, shift left=7pt, "#4"]
  \ar[l, phantom, "\scriptstyle#6"]
\end{tikzcd}
}

\newcommand{\xtickar}[1]{\begin{tikzcd}[baseline=-0.5ex,cramped,sep=small,ampersand 
replacement=\&]{}\ar[r,tick, "{#1}"]\&{}\end{tikzcd}}

\newcommand{\xslashar}[1]{\begin{tikzcd}[baseline=-0.5ex,cramped,sep=small,ampersand 
replacement=\&]{}\ar[r,slash, "{#1}"]\&{}\end{tikzcd}}

 
  % amsthm %
\theoremstyle{definition}
\newtheorem{definitionx}{Definition}[chapter]
\newtheorem{examplex}[definitionx]{Example}
\newtheorem{remarkx}[definitionx]{Remark}
\newtheorem{notation}[definitionx]{Notation}


\theoremstyle{plain}

\newtheorem{theorem}[definitionx]{Theorem}
\newtheorem{proposition}[definitionx]{Proposition}
\newtheorem{corollary}[definitionx]{Corollary}
\newtheorem{lemma}[definitionx]{Lemma}
\newtheorem{warning}[definitionx]{Warning}
\newtheorem{conjecture}[definitionx]{Conjecture}
\newtheorem*{theorem*}{Theorem}
\newtheorem*{proposition*}{Proposition}
\newtheorem*{corollary*}{Corollary}
\newtheorem*{lemma*}{Lemma}
\newtheorem*{warning*}{Warning}
%\theoremstyle{definition}
%\newtheorem{definition}[theorem]{Definition}
%\newtheorem{construction}[theorem]{Construction}

\newenvironment{example}
  {\pushQED{\qed}\renewcommand{\qedsymbol}{$\lozenge$}\examplex}
  {\popQED\endexamplex}
  
 \newenvironment{remark}
  {\pushQED{\qed}\renewcommand{\qedsymbol}{$\lozenge$}\remarkx}
  {\popQED\endremarkx}
  
  \newenvironment{definition}
  {\pushQED{\qed}\renewcommand{\qedsymbol}{$\lozenge$}\definitionx}
  {\popQED\enddefinitionx} 

    
%-------- Single symbols --------%
	
\DeclareSymbolFont{stmry}{U}{stmry}{m}{n}
\DeclareMathSymbol\fatsemi\mathop{stmry}{"23}

\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathx10
      }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}
\DeclareFontSubstitution{U}{mathx}{m}{n}
\DeclareMathAccent{\widecheck}{0}{mathx}{"71}

%-------- Tikz diagrams --------%

\tikzset{
	oriented WD/.style={%everything after equals replaces "oriented WD" in key.
		every to/.style={out=0,in=180,draw},
    label/.style={
    	font=\everymath\expandafter{\the\everymath\scriptstyle},
      inner sep=0pt,
      node distance=2pt and -2pt},
    semithick,
    node distance=1 and 1,
    decoration={markings, mark=at position \stringdecpos with \stringdec},
    ar/.style={postaction={decorate}},
    execute at begin picture={\tikzset{
    	x=\bbx, y=\bby,
      every fit/.style={inner xsep=\bbx, inner ysep=\bby}}}
    },
    string decoration/.store in=\stringdec,
    string decoration={\arrow{stealth};},
    string decoration pos/.store in=\stringdecpos,
    string decoration pos=.7,
    bbx/.store in=\bbx,
    bbx = 1.5cm,
    bby/.store in=\bby,
    bby = 1.5ex,
    bb port sep/.store in=\bbportsep,
    bb port sep=1.5,
    % bb wire sep/.store in=\bbwiresep,
    % bb wire sep=1.75ex,
    bb port length/.store in=\bbportlen,
    bb port length=4pt,
    bb penetrate/.store in=\bbpenetrate,
    bb penetrate=0,
    bb min width/.store in=\bbminwidth,
    bb min width=1cm,
    bb rounded corners/.store in=\bbcorners,
    bb rounded corners=2pt,
    bb spider/.style={
    	bb port sep=1, bb port length=10pt, bbx=.4cm, bb min width=.4cm, bby=.8ex},
    bb small/.style={
    	bb port sep=1, bb port length=2.5pt, bbx=.4cm, bb min width=.4cm, bby=.7ex},
		bb medium/.style={
			bb port sep=1, bb port length=2.5pt, bbx=.4cm, bb min width=.4cm, bby=.9ex},
    bb/.code 2 args={%When you see this key, run the code below:
    	\pgfmathsetlengthmacro{\bbheight}{\bbportsep * (max(#1,#2)+1) * \bby}
      \pgfkeysalso{draw,minimum height=\bbheight,minimum
       width=\bbminwidth,outer sep=0pt,
         rounded corners=\bbcorners,thick,
         prefix after command={\pgfextra{\let\fixname\tikzlastnode}},
         append after command={\pgfextra{\draw
            \ifnum #1=0{} \else foreach \i in {1,...,#1} {
            	($(\fixname.north west)!{\i/(#1+1)}!(\fixname.south west)$) +(-\bbportlen,0) coordinate (\fixname_in\i) -- +(\bbpenetrate,0) coordinate (\fixname_in\i')}\fi 
  					%Define the endpoints of tickmarks
            \ifnum #2=0{} \else foreach \i in {1,...,#2} {
            	($(\fixname.north east)!{\i/(#2+1)}!(\fixname.south east)$) +(-
\bbpenetrate,0) coordinate (\fixname_out\i') -- +(\bbportlen,0) coordinate (\fixname_out\i)}\fi;
           }}}
		},
			bb name/.style={
     	append after command={
				\pgfextra{\node[anchor=north] at (\fixname.north) {#1};}
			}
		}
  }


%-------- Renewed commands --------%

\renewcommand{\ss}{\subseteq}

%-------- Other Macros --------%


\DeclarePairedDelimiter{\present}{\langle}{\rangle}
\DeclarePairedDelimiter{\copair}{[}{]}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\corners}{\ulcorner}{\urcorner}
\DeclarePairedDelimiter{\ihom}{[}{]}

\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Mor}{Mor}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\idy}{idy}
\DeclareMathOperator{\comp}{com}
\DeclareMathOperator*{\colim}{colim}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\ob}{Ob}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\el}{El}
\DeclareMathOperator{\Funn}{Fun}
\DeclareMathOperator{\constt}{const}


\newcommand{\tw}{\Cat{Tw}}

\newcommand{\const}[1]{\texttt{#1}}%a constant, or named element of a set
\newcommand{\Set}[1]{\mathsf{#1}}%a named set
\newcommand{\ord}[1]{\mathsf{#1}}%an ordinal
\newcommand{\cat}[1]{\mathcal{#1}}%a generic category
\newcommand{\Cat}[1]{\mathbf{#1}}%a named category
\newcommand{\fun}[1]{\mathrm{#1}}%a function
\newcommand{\Fun}[1]{\mathit{#1}}%a named functor




\newcommand{\id}{\mathrm{id}}
\newcommand{\then}{\mathbin{\fatsemi}}

\newcommand{\cocolon}{:\!}


\newcommand{\iso}{\cong}
\newcommand{\too}{\longrightarrow}
\newcommand{\tto}{\rightrightarrows}
\newcommand{\To}[2][]{\xrightarrow[#1]{#2}}
\renewcommand{\Mapsto}[1]{\xmapsto{#1}}
\newcommand{\Tto}[3][13pt]{\begin{tikzcd}[sep=#1, cramped, ampersand replacement=\&, text height=1ex, text depth=.3ex]\ar[r, shift left=2pt, "#2"]\ar[r, shift right=2pt, "#3"']\&{}\end{tikzcd}}
\newcommand{\Too}[1]{\xrightarrow{\;\;#1\;\;}}
\newcommand{\from}{\leftarrow}
\newcommand{\fromm}{\longleftarrow}
\newcommand{\ffrom}{\leftleftarrows}
\newcommand{\From}[1]{\xleftarrow{#1}}
\newcommand{\Fromm}[1]{\xleftarrow{\;\;#1\;\;}}
\newcommand{\surj}{\twoheadrightarrow}
\newcommand{\inj}{\hookrightarrow}
\newcommand{\wavyto}{\rightsquigarrow}
\newcommand{\lollipop}{\multimap}
\newcommand{\imp}{\Rightarrow}
\renewcommand{\iff}{\Leftrightarrow}
\newcommand{\down}{\mathbin{\downarrow}}
\newcommand{\fromto}{\leftrightarrows}
\newcommand{\tickar}{\xtickar{}}
\newcommand{\slashar}{\xslashar{}}
\newcommand{\card}{\,^{\#}}

\newcommand{\rdag}{^{\rotatebox{0}{$\dagger$}}}
\newcommand{\ldag}{^{\rotatebox{180}{$\dagger$}}}

\newcommand{\inv}{^{-1}}
\newcommand{\op}{^\tn{op}}

\newcommand{\tn}[1]{\textnormal{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\wh}[1]{\widehat{#1}}
\newcommand{\wc}[1]{\widecheck{#1}}
\newcommand{\ubar}[1]{\underaccent{\bar}{#1}}



\newcommand{\bb}{\mathbb{B}}
\newcommand{\cc}{\mathbb{C}}
\newcommand{\nn}{\mathbb{N}}
\newcommand{\pp}{\mathbb{P}}
\newcommand{\qq}{\mathbb{Q}}
\newcommand{\zz}{\mathbb{Z}}
\newcommand{\rr}{\mathbb{R}}


\newcommand{\finset}{\Cat{Fin}}
\newcommand{\smset}{\Cat{Set}}
\newcommand{\lgset}{\Cat{SET}}
\newcommand{\smcat}{\Cat{Cat}}
\newcommand{\lgcat}{\Cat{CAT}}
\newcommand{\prof}{\mathbb{P}\Cat{rof}}
\newcommand{\catsharp}{\Cat{Cat}^{\sharp}}
\newcommand{\ppolyfun}{\mathbb{P}\Cat{olyFun}}
\newcommand{\ccatsharp}{\mathbb{C}\Cat{at}^{\sharp}}
\newcommand{\ccatsharpdisc}{\mathbb{C}\Cat{at}^{\sharp}_{\tn{disc}}}
\newcommand{\ccatsharplin}{\mathbb{C}\Cat{at}^{\sharp}_{\tn{lin}}}
\newcommand{\ccatsharpdisccon}{\mathbb{C}\Cat{at}^{\sharp}_{\tn{disc,con}}}
\newcommand{\sspan}{\mathbb{S}\Cat{pan}}
\newcommand{\en}{\Cat{End}}

\newcommand{\set}{\tn{-}\Cat{Set}}
\newcommand{\coalg}{\tn{-}\Cat{Coalg}}


\newcommand{\blank}[1][1pt]{\hspace{#1}\cdot\hspace{#1}}
\newcommand{\rest}[2]{#1\big|_{#2}}



\newcommand{\slogan}[1]{\begin{center}\textit{#1}\end{center}}

\newcommand{\qand}{\quad\text{and}\quad}
\newcommand{\qqand}{\qquad\text{and}\qquad}
\newcommand{\qor}{\quad\text{or}\quad}
\newcommand{\qqor}{\qquad\text{or}\qquad}
\newcommand{\dnote}[1]{{\color{blue}David says:}~#1\quad{\color{blue}$\lozenge$}}


% David extras




\newcommand{\andreapic}{
  \begin{tikzpicture}[oriented WD, bb min width =.7cm, bby=1.6ex, bbx=.7cm,bb port length=0pt] 
    \node[bb port sep=.8, bb={2}{1}, bb name=$\Sigma$] (Sigma1) {};
    \node[bb port sep=1.6,bb min width=4.3em, bb={2}{3}, below right=-2.5 and 1.5 of Sigma1.south east, bb name=Chassis] (Chassis) {};
    \node[bb port sep=.9,bb min width=4.3em, bb={2}{4}, below right=-3 and 2 of Chassis_out2, bb name=Motor] (Motor) {};
  	\node[bb port sep=.8, bb={2}{1}, right=1.5 of Motor.south east, bb name=$\Sigma$] (Sigma2) {};
    \node[bb={0}{0}, fit={($(Sigma1.north west)+(-.5,1)$) (Chassis) (Motor) ($(Sigma2.east)+(.25,0)$)}] (Y) {};
    \coordinate (Y_in1) at (Sigma1_in2-|Y.west);
    \coordinate (Y_in2) at (Chassis_in2-|Y.west);
    \coordinate (Y_out1) at (Motor_out2-|Y.east);
    \coordinate (Y_out2) at (Motor_out3-|Y.east);
    \coordinate (Y_out3) at (Sigma2_out1-|Y.east);
    \draw[ar] (Y_in1) to node[above=0pt, font=\tiny] {} (Sigma1_in2);
    \draw[ar] (Y_in2) to node[above=0pt, font=\tiny] {} (Chassis_in2);
    \draw[ar] (Sigma1_out1) to node[above=0pt, font=\tiny] {Weight} (Chassis_in1);
    \draw[ar] (Chassis_out1) to node[above=0pt, font=\tiny] {Torque} (Motor_in1);
    \draw[ar] (Chassis_out2) to node[above=0pt, font=\tiny] {Speed} (Motor_in2);
    \draw[ar] let \p1=(Motor.south west), \p2=(Motor.south east), \n1={\y1-\bby},\n2=\bbportlen in
    	(Chassis_out3) to node[above=0pt, font=\tiny] {Cost} (\x1-\n2,\n1) -- (\x2+\n2,\n1) to (Sigma2_in2);
    \draw[ar] (Motor_out2) to node[above=0pt, font=\tiny, pos=.8] {} (Y_out1);
    \draw[ar] (Motor_out4) to node[above=0pt, font=\tiny] {Cost} (Sigma2_in1);
    \draw[ar] (Motor_out3) to node[below=0pt, font=\tiny, pos=.8] {} (Y_out2);
    \draw[ar] (Sigma2_out1) to node[below=0pt, font=\tiny] {} (Y_out3); 
    \draw[ar] let \p1=(Motor.north east), \p2=(Sigma1.north west), \n1={\y2+\bby},\n2=\bbportlen in
    	(Motor_out1) to[in=0] node[right=0pt, font=\tiny] {Motor Weight} (\x1+\n2,\n1) -- (\x2-\n2,\n1) to[out=180] (Sigma1_in1);
  	\draw[label]
  		node[left=.3 of Y_in1] {\footnotesize Extra payload}
  		node[left=.3 of Y_in2] {\footnotesize Velocity}
  		node[right=.3 of Y_out1] {\footnotesize Voltage}
  		node[right=.3 of Y_out2] {\footnotesize Current}
  		node[right=.3 of Y_out3] {\footnotesize Cost \$}
%  		node[above right=.2 and .3 of Chassis_out1] {\tiny Torque}
%  		node[above right=.2 and .3 of Chassis_out2] {\tiny Speed}
%  		node[above right=.2 and .3 of Chassis_out3] {\tiny Cost \$}
%  		node[above right=.3 and .3 of Motor_out1, align=center, font=\tiny] {Motor\\weight}
	;	
  \end{tikzpicture}
}


\newcommand{\ivlpos}{(0,\infty)}
\newcommand{\ivlnon}{[0,\infty)}
\newcommand{\rrpos}{\rr_{>0}}
\newcommand{\rrnon}{\rr_{\geq0}}
\newcommand{\K}{\cat{K}}

\newcommand{\Kdag}[1][0]{\K\ldag}

\newcommand{\flr}[2][\blank]{\floor{#1}_{#2}}
\newcommand{\clg}[2][\blank]{\ceil{#1}_{#2}}
\newcommand{\tick}{\shortmid}
\newcommand{\ttick}{\shortmid\shortmid}


% Aaron extras



%Paulo extras








% ---- Changeable document parameters ---- %

\linespread{1.1}
\allowdisplaybreaks
\setsecnumdepth{section}
\settocdepth{section}
\setlength{\parindent}{15pt}

\settocdepth{chapter}

%--------------- Document ---------------%
\begin{document}

\title{Stability by co-design}

\author{
  Aaron Ames \and  \and 
  David I. Spivak \and\and 
  Paulo Tabuada}

\date{\vspace{-.2in}}

\maketitle

\begin{abstract}
\end{abstract}

%\renewcommand\cftchapteraftersnumb{\normalfont}
\renewcommand\cftbeforechapterskip{2pt plus 1pt}

%\begin{KeepFromToc}
%\tableofcontents
%\end{KeepFromToc}



\chapter{Introduction}
\label{chap.intro}

Lyapunov's notion of stability-by-comparison serves as the mathematical foundation of the control-theoretic perspective on dynamical systems. Category theory offers rich theory in which to account for any well-defined sort of comparison, so it is a natural fit.

In \cite{censi2015mathematical}, Andrea Censi used category theory to explain a theory of \emph{feasibility}, as exemplified in the practice of collaborative engineering design problems. For example, the feasibility of a robot---consisting of a chassis, a motor, and a battery---was considered in terms of traced monoidal categories. In their introductory book  \cite{fong2019seven} originally titled \emph{Seven Sketches in Compositionality}, Fong and Spivak offered a pedagogical account of feasibility theory 
\begin{equation}\label{eqn.andreadavidbrendan}
	\andreapic
\end{equation}
in terms of \emph{boolean profunctors}. 

In this paper, we use the mathematics behind co-design---the (Cartesian) monoidal equipment of \emph{boolean-enriched categories}---to recast Lyapunov's approach to stability. Though concise, the paper will be self-contained for those acquainted with
\begin{itemize}
	\item the basic theory of metric spaces: continuity and uniform continuity, and 
	\item the ``big-3'' of category theory: categories, functors, and natural transformations.
\end{itemize}
Though we will not include further pictures as in \eqref{eqn.andreadavidbrendan}, we will show how boolean profunctor theory also accounts for comparative stability, as we next briefly describe.

\paragraph{Basic analysis}

Continuity and uniform continuity **

\subsection{Natural Stability}

Lyapunov gave what turns out to be a beautiful categorical account of stability, though he did not know category theory. What he did know was that comparing dynamical systems---especially to the simplest ones---would offer a way to account for intuitions about energy in mathematical terms.

\dnote{(Expert Fill:) background on stability, comparing systems, and energy}


\paragraph{Class $\K$ functions in analysis.}

Ones intuitions about the world can be cast in the language of the nonnegative reals, $\ivlnon$, which is a highly structured object. Its additive commutative monoid structure $(\ivlnon,0,+)$ induces a poset structure $t_1\leq t_2$, defined by. **

\subsection{Simple systems and rounding: from $\K$ to $\Kdag$}

Rounding up and down: as the monad and comonad given by the adjoint endofunctors on $\rrnon$.

\subsection{Lyapunov in terms of boolean profunctors}

% https://q.uiver.app/#q=WzAsNCxbMCwwLCJYIl0sWzAsMSwiUiJdLFsxLDEsIlIiXSxbMSwwLCJZIl0sWzMsMiwiRyIsMix7ImN1cnZlIjoxfV0sWzAsMSwiRiIsMix7ImN1cnZlIjoxfV0sWzEsMiwiIiwyLHsic3R5bGUiOnsiYm9keSI6eyJuYW1lIjoiYmFycmVkIn19fV0sWzAsMSwiRiciLDAseyJjdXJ2ZSI6LTF9XSxbMywyLCJHJyIsMCx7ImN1cnZlIjotMX1dXQ==
\[
\begin{tikzcd}[row sep=1cm, column sep=2.7cm]
	X 
		\ar[dd, bend left=20pt, "F'"]
		\ar[dd, bend right=20pt, "F"']
		\ar[r, bend left=20pt, "\shortmid"{marking}", "~F'\leq_R G'", ""' name=C1]
		\ar[r, bend right=20pt, "\shortmid"{marking}", "F\leq_R G"' name=C2', "" name=C2]
	& 
	Y 
		\ar[dd, bend left=20pt, "G'"]
		\ar[dd, bend right=20pt, "G"'] 
	\\~\\
	R 
		\ar[r, "\shortmid\shortmid"{marking}", "\leq_R"' below=2pt, "" name=R]
	&
	R
	\ar[from=C1, to=C2, Rightarrow, ]
	\ar[from=C1, to=R, right, phantom, "\color{gray}\footnotesize~\tn{cart}"]
	\ar[from=C2, to=R, right, phantom, 
		"\color{gray}
		\footnotesize
		\!
		\text{cart}"
		]
\end{tikzcd}
\qquad
\parbox{1.3in}{\raggedright\textit{In the case of uniform continuity:}}
\;\;
\begin{tikzcd}[row sep=1cm, column sep=2.7cm]
	{(0,\infty)} 
		\ar[dd, bend left=20pt, hook, ""]
		\ar[dd, bend right=20pt, "\Delta"']
		\ar[r, bend left=20pt, "\shortmid"{marking}", "{\Delta(\epsilon)\geq d_M(m_1,m_2)}", ""' name=C1]
		\ar[r, bend right=20pt, "\shortmid"{marking}", "{\epsilon\geq d_N(fm_1,fm_2)}"' name=C2', "" name=C2]
	& 
	M\times M 
		\ar[dd, bend left=20pt, "d_M"]
		\ar[dd, bend right=20pt, "d_N\circ(f\times f)"'] 
	\\~\\
	\ivlnon 
		\ar[r, "\shortmid\shortmid"{marking}", "\geq"' below=2pt, "" name=R]
	&
	{[0,\infty)}
	\ar[from=C1, to=C2, Rightarrow, "\fun{ucont?}_f"]
	\ar[from=C1, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		~
		\tn{cart}"]
	\ar[from=C2, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		\!
		\text{cart}"
		]
\end{tikzcd}
\]
This 2-arrow labeled ``$\text{ucont?}_f$" asks the question:
\[
\Delta(\epsilon)\geq d_M(m_1,m_2)\xRightarrow{\;\;?\;\;}\epsilon\geq d_N\big(f(m_1),f(m_2)\big), \quad 
	\text{for all }\epsilon\in (0,\infty), (m_1,m_2)\in M\times M
\]
This is well-known to be the definition of uniform continuity. A function $\Delta\colon(0,\infty)\to(0,\infty)$ encodes the function which, for every $\epsilon>0$ chooses a $\delta\coloneqq\Delta(\epsilon)>0$. The implication labeled $\xRightarrow{?}$ says that for every two points $m_1,m_2$ whose distance is bounded by $\delta$, applying $f$ results in two points $f(m_1), f(m_2)$ whose distance is bounded by $\epsilon$. We will explain the diagrammatic approach in detail.

\subsection{Plan of the paper}

Continuity, 
uniform continuity, 
stability, and
class $\Kdag$-stability.

\subsection*{Acknowledgments}



\chapter{Basic stability theory and boolean profunctor theory}
\label{chap.stability_and_profunctors}

\chapter{Continuity by co-design (boolean profunctors)}
\label{}

Let $(M,d_M)$ and $(N,d_N)$ be metric spaces. A function $f\colon M\to N$ is uniformly continuous iff there exists a function $\Delta\colon(0,\infty)\to(0,\infty)$ such that for all $\epsilon>0$ and all $(m_1,m_2)\in M\times M$, the following implication holds:
\[
\Delta(\epsilon)\geq d_M(m_1,m_2)\implies
\epsilon\geq d_N(f(m_1),f(m_2)).
\]

Thus, given $\Delta$ one forms the diagram left; it establishes uniform continuity if there exists a 2-morphism between the associated cartesian profunctors, as shown right:
\[
\begin{tikzcd}[row sep=1cm, column sep=3.2cm]
	{(0,\infty)} 
		\ar[dd, bend left=40pt, hook, ""]
		\ar[d, "\Delta?"']
%		\ar[r, bend left=20pt, "\shortmid"{marking}", "{\Delta(\epsilon)\geq d_M(m_1,m_2)}", ""' name=C1]
%		\ar[r, bend right=20pt, "\shortmid"{marking}", "{\epsilon\geq d_N(fm_1,fm_2)}"' name=C2', "" name=C2]
%		\ar[from=C1, to=C2, Rightarrow, "\fun{ucont?}_f"]
	& 
	M\times M 
		\ar[dd, bend left=40pt, "d_M"]
		\ar[d, "f\times f"'] 
	\\
	{(0,\infty)}
		\ar[d, hook]&
	N\times N
		\ar[d, "d_N"']\\
	\ivlnon 
		\ar[r, "\shortmid\shortmid"{marking}", "\geq"' below=2pt, "" name=R]
	&
	{[0,\infty)}
%	\ar[from=C1, to=R, right, phantom, pos=.65,
%		"\color{gray}
%		\footnotesize
%		~
%		\tn{cart}"]
%	\ar[from=C2, to=R, right, phantom, pos=.65,
%		"\color{gray}
%		\footnotesize
%		\!
%		\text{cart}"
%		]
\end{tikzcd}
\hspace{.6in}
\begin{tikzcd}[row sep=1cm, column sep=3.2cm]
	{(0,\infty)} 
		\ar[dd, bend left=40pt, hook, ""]
		\ar[d, "\Delta"']
		\ar[r, bend left=20pt, "\shortmid"{marking}", "{\Delta(\epsilon)\geq d_M(m_1,m_2)}", ""' name=C1]
		\ar[r, bend right=20pt, "\shortmid"{marking}", "{\epsilon\geq d_N(fm_1,fm_2)}"' name=C2', "" name=C2]
		\ar[from=C1, to=C2, Rightarrow, "\fun{ucont?}_f"]
	& 
	M\times M 
		\ar[dd, bend left=40pt, "d_M"]
		\ar[d, "f\times f"'] 
	\\
	{(0,\infty)}
		\ar[d, hook]&
	N\times N
		\ar[d, "d_N"']\\
	\ivlnon 
		\ar[r, "\shortmid\shortmid"{marking}", "\geq"' below=2pt, "" name=R]
	&
	{[0,\infty)}
	\ar[from=C1, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		~
		\tn{cart}"]
	\ar[from=C2, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		\!
		\text{cart}"
		]
\end{tikzcd}
\]

Similarly, we obtain continuity at a point. A function $f\colon M\to N$ is continuous at some $m_0\in M$ if there exists a function $\Delta\colon (0,\infty)\to(0,\infty)$ such that for all $\epsilon>0$ and all $m\in M$, the following implication holds:
\[
\Delta(\epsilon)\geq d_M(m_0,m)\implies
\epsilon\geq d_N(f(m_0),f(m)).
\]
We again obtain this by asking about the existence of a 2-cell between the cartesian morphisms, as shown
\[
\begin{tikzcd}[row sep=1cm, column sep=4cm]
	{(0,\infty)} 
		\ar[dd, bend left=40pt, hook, ""]
		\ar[d, "\Delta"']
		\ar[r, bend left=20pt, "\shortmid"{marking}", "{\Delta(\epsilon)\geq d_M(m_0,m)}", ""' name=C1]
		\ar[r, bend right=20pt, "\shortmid"{marking}", "{\epsilon\geq d_N(fm_0,fm)}"' name=C2', "" name=C2]
		\ar[from=C1, to=C2, Rightarrow, "\fun{cont?}_{f,m_0}"]
	& 
	M 
		\ar[dd, bend left=40pt, "{d_M(m_0,\blank)}"]
		\ar[d, "f"'] 
	\\
	{(0,\infty)}
		\ar[d, hook]&
	N
		\ar[d, "{d_M(f(m_0),\blank)}"']\\
	\ivlnon 
		\ar[r, "\shortmid\shortmid"{marking}", "\geq"' below=2pt, "" name=R]
	&
	{[0,\infty)}
	\ar[from=C1, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		~
		\tn{cart}"]
	\ar[from=C2, to=R, right, phantom, pos=.65,
		"\color{gray}
		\footnotesize
		\!
		\text{cart}"
		]
\end{tikzcd}
\]

We now use the theory of equipments to show that the composite of uniformly continuous functions is uniformly continuous. The same can be done for continuity in place of uniform continuity.

\begin{proposition}
The identity on $M$ is uniformly continuous, and if $f\colon M\to N$ and $g\colon N\to O$ are uniformly continuous then so is $g\circ f$.
\end{proposition}
\begin{proof}
The function $f=\id_M$ is uniformly continuous because then one can take $\Delta=\id_{(0,\infty)}$ and the two maps are equal. 

Suppose that $f$ and $g$ are uniformly continuous.**
\end{proof}


\chapter{Adjoint endofunctors of $(\ivlnon,\geq)$ as simple systems}
\label{}

Throughout this section we assume that $\alpha\colon R\to R'$ is monotonic, but each of $R$ and $R'$ might be the poset carried by any of the following sets:
\begin{equation}\label{eqn.RR'}
	R,R'\text{~are any of:~}\qquad
	[0,\infty]\qqor
	[0,\infty)\qqor
	(0,\infty]\qqor
	(0,\infty),
\end{equation}
equipped with the $\geq$ ordering. For the time being we fix $R$ and $R'$ but remain agnostic about which of the posets from \eqref{eqn.RR'} they may be. Then $\alpha$ may or may not have a left adjoint $\alpha\ldag\colon R'\to R$, meaning
\begin{equation}\label{eqn.unit_counit}
  \epsilon\geq\alpha(\alpha\ldag(\epsilon))
  \qqand
  \alpha\ldag(\alpha(\delta))\geq\delta.
\end{equation}
If one exists then as such it will be unique. Note that any monotonic bijection $\alpha\colon R\To{\cong}R$ will be a right (also a left) adjoint, and its inverse will be its left (resp.\ right) adjoint.

\begin{lemma}\label{lemma.sup_formula}
Suppose given $\alpha\colon R'\to R$. If it has a left adjoint $\alpha\ldag$, then $\alpha\ldag$ will satisfy the following formula for any $\epsilon\in R'$:
\begin{equation}\label{eqn.alpha_left}
  \alpha\ldag(\epsilon)=\sup_{\{\delta\mid \epsilon\geq\alpha(\delta)\}}\delta.
\end{equation}
\end{lemma}
\begin{proof}
Suppose given \eqref{eqn.unit_counit}. To show $\alpha\ldag(\epsilon)\geq\sup_{\{\delta\mid \epsilon\geq\alpha(\delta)\}}\delta$, it suffices to show that for all $\delta$, if $\epsilon\geq\alpha(\delta)$ then $\alpha\ldag(\epsilon)\geq\delta$. By \eqref{eqn.unit_counit}, if $\epsilon\geq\alpha(\delta)$ then $\alpha\ldag(\epsilon)\geq\alpha\ldag(\alpha(\delta))\geq\delta$. 

Note that right adjoints preserve all limits that exist, meaning $\alpha$ preserves sups. To show 
$
\sup_{\{\delta\mid \epsilon\geq\alpha(\delta)\}}\delta
\geq
\alpha\ldag(\epsilon)
$, we again use \eqref{eqn.unit_counit}:
\[
\left(\sup_{\{\delta\mid \epsilon\geq\alpha(\delta)\}}\delta \right)\geq
\left(\sup_{\{\epsilon'\mid \epsilon\geq\alpha(\alpha\ldag(\epsilon'))\}}\alpha\ldag(\epsilon')\right)\geq\alpha\ldag(\epsilon)
\]
This completes the proof.
\end{proof}

Given that \cref{eqn.alpha_left,eqn.unit_counit} hold, then the functors are adjoints $(\alpha\ldag\dashv\alpha)$ and we may write
for $\epsilon\in R'$ and $\delta\in R$.

\begin{example}
Here is a table of some maps that do or do not have left adjoints:
\[
\begin{array}{lll||c|c}
	\text{Domain}&\text{Codomain}&\text{Monotonic $\alpha(\delta)$}&\text{Left adj.\ }\alpha\ldag(\epsilon)?&\text{Reason not}\\\hline
	\blank,\blank&\blank,\blank&\delta+k \quad(k>0)&\text{N/A}&\delta\geq\alpha\ldag(\delta)+1\geq1\\
	\blank,\blank&\blank,\blank&\delta*k \quad(k>0)&\frac{\epsilon}{k}&\text{N/A}\\
	\blank,\infty]&[0,\blank&0&\infty&\text{N/A}\\
	\blank,\blank&[0,\blank&\flr[\delta]{}&\text{N/A}&\alpha\text{ doesn't prsv. sups}\\
	\blank,\blank&[0,\blank&\clg[\delta]{}&\flr[\epsilon]{}&\text{N/A}
\end{array}
\]
\end{example}

The composite of $\alpha$ and $\alpha\ldag$ in either order are reminiscent of ``rounding'' up or down.

\begin{lemma}[Monads/comonads as rounding up/down]
Suppose $\alpha\ldag$ is left adjoint to $\alpha$:
\[
\adjpos{R'}{\alpha\ldag}{\alpha}{R}{\geq}.
\]
For any $\delta\in R$ and $\epsilon\in R'$, define
\[
	\clg[\delta]{\alpha}\coloneqq\alpha\ldag(\alpha(\delta))\quad\in R
	\qqand
	\flr[\epsilon]{\alpha}\coloneqq\alpha(\alpha\ldag(\epsilon))\quad\in R'
\]
 Then for any $r\in R$ and $r'\in R'$ we have:
% \[
% 	\epsilon\geq r'\geq\flr[\epsilon]{\alpha}
%	\implies
%	\flr[r']{\alpha}
%	=
% 	\flr[\epsilon]{\alpha}
%	.\]
%	Similarly, for any $\delta\in R$, let $\clg[\delta]{\alpha}\coloneqq\alpha\ldag(\alpha(\delta))\in R$. Then for any $r\in R$ we have the implication:
% \[
% 	\clg[\delta]{\alpha}\geq r\geq\delta
%	\implies
% 	\clg[\delta]{\alpha}
%	=
%	\clg[r']{\alpha}
%	.\]	
\[
  \clg[{\clg[r]{\alpha}}]{\alpha}=\clg[r]{\alpha}.
  \qqand
  \flr[{\flr[r']{\alpha}}]{\alpha}=\flr[r']{\alpha}
\]
In particular, we have implications
 \[
 	\clg[\delta]{\alpha}\geq r\geq\delta
	\implies
 	\clg[\delta]{\alpha}
	=
	\clg[r]{\alpha}	
	\qqand
 	\epsilon\geq r'\geq\flr[\epsilon]{\alpha}
	\implies
	\flr[r']{\alpha}
	=
 	\flr[\epsilon]{\alpha}
	.\]
\end{lemma}
\begin{proof}
For the first claim we calculate:
\[
  \alpha\ldag\circ\alpha\geq
  \alpha\ldag\circ\alpha\circ\alpha\ldag\circ\alpha\geq
  \alpha\ldag\circ\alpha
  \qqand
  \alpha\circ\alpha\ldag\geq
  \alpha\circ\alpha\ldag\circ\alpha\circ\alpha\ldag\geq
  \alpha\circ\alpha\ldag
\]
For the second, we apply $\clg{\alpha}$ to $\clg[\delta]{\alpha}\geq r\geq\delta$ and use the first claim to conclude $\clg[\delta]{\alpha}\geq \clg[r]{\alpha}\geq\clg[\delta]{\alpha}$. Similarly, we apply $\flr{\alpha}$ to $\epsilon\geq r'\geq\flr[\epsilon]{\alpha}$ and use the first claim to conclude $\flr[\epsilon]{\alpha}\geq \flr[r']{\alpha}\geq\flr[\epsilon]{\alpha}$.
\end{proof}

\begin{proposition}\label{prop.cts_adjoint_close}
Let $R\coloneqq [0,\infty]$, and suppose $\alpha\colon R\to R'$ is continuous. Then $\alpha$ has a left adjoint iff $0\in R'$ and $\alpha(0)=0$.
\end{proposition}
\begin{proof}
	If $\alpha$ has a left adjoint $\alpha\ldag$, then $0\geq\alpha(\alpha\ldag(0))\geq\alpha(0)$. For the converse, suppose $0\in R'$ and $\alpha(0)=0$. Then $\alpha$ preserves all sups: it preserves the empty sup, and all other sups follow from monotonicity and continuity. Defining $\alpha\ldag$ as in \eqref{eqn.alpha_left}, one checks that both inequalities in \eqref{eqn.unit_counit} hold.
\end{proof}

\begin{proposition}\label{prop.cts_v1}
Let $R\coloneqq [0,\infty)$, and suppose $\alpha\colon R\to R'$ is continuous. Then $\alpha$ has a left adjoint iff $0\in R'$, $\alpha(0)=0$, and $\alpha$ is surjective.
\end{proposition}
\begin{proof}
	The proof of \cref{prop.cts_adjoint_close} goes through until one attempts to define $\alpha\ldag$ as in \eqref{eqn.alpha_left}. When $\alpha$ is surjective then the proof proceeds as before, so surjectivity is sufficient. However, if $\alpha$ is not surjective, i.e.\ if there exists $\epsilon$ such that $\epsilon\geq\alpha(\delta)$ for all $\delta$, then $\alpha\ldag(\epsilon)$ needs to be $\infty$, but it is not in the domain. Thus surjectivity is necessary.
\end{proof}

\begin{proposition}\label{prop.cts_v2}
Suppose $0\in R,R'$, and suppose $\alpha\colon R\to R'$ is continuous. If it has a left adjoint $\alpha\ldag$, then it satisfies
\begin{equation}\label{eqn.adj_restriction}
	\alpha\ldag(\epsilon)=0\implies
	\epsilon=0.
\end{equation}
In other words, letting $i\colon R-\{0\}\inj R$ be the inclusion, then under the above conditions there exists a dashed arrow making the following diagram commute:
\begin{equation}\label{eqn.adj_restriction_diagram}
\begin{tikzcd}
	R-\{0\}\ar[r, "i"]\ar[d, dashed, "\Delta_\alpha"']&
	R\ar[d, "\alpha\ldag"]\\
	R'-\{0\}\ar[r, "i"']&
	R'
\end{tikzcd}
\end{equation}
%In this case, $\Delta_\alpha$ is itself a left adjoint iff $\alpha\inv(0)=\{0\}$.
\end{proposition}
\begin{proof}
First note that we satisfy either the hypotheses of \cref{prop.cts_v1} or \cref{prop.cts_v2}, so $\alpha(0)=0$. Now suppose $\alpha\ldag(\epsilon)=0$. By \cref{lemma.sup_formula}, we have $\sup_{\{\delta|\epsilon\geq\alpha(\delta)\}}\delta=0$, so $\{\delta\mid\epsilon\geq\alpha(\delta)\}=\{0\}$. Since $\alpha$ is
continuous, $\epsilon=0$. This proves the first claim, which is equivalent to the existence of the dashed arrow as in \eqref{eqn.adj_restriction}.
%
%For the last claim, if $\Delta_\alpha$ has a right adjoint
\end{proof}


\chapter{Classical and $\Kdag$-stability by co-design}
\label{}

\[
\begin{tikzcd}
	{(0,\infty)}
		\ar[d, hook, "i"']\ar[r, "\ttick"{marking, name=A1}, "\geq" below=1pt]
		\ar[rr, bend left=25pt, "i\geq \|\Phi\|", ""' name=D1]
	&
	|[alias=D2]|{(0,\infty)}
		\ar[d, "\Delta"]
		\ar[r, "\tick"{marking}, "i\circ\Delta\geq\|\pi\|"']
	&[15pt]
	T\times E
		\ar[d, "\pi"]\ar[ddr, bend left=20pt, "\Phi"]
	\\
	{[0,\infty)}
		\ar[dd, shift right=5pt, bend right=50pt, equal, "" name=C1]\ar[d, "\alpha\ldag"']
	&
	{(0,\infty)}
		\ar[d, hook, "i"]
	&
	E
		\ar[l, phantom, "\text{cart}"]
		\ar[d, "\|\blank\|"]
	\\
	|[alias=C2]|{[0,\infty)}
		\ar[r, "\ttick"{marking, name=A2}, "\geq" below=1pt]
		\ar[d, "\alpha"']
	&
	|[alias=B1]|{[0,\infty)}
		\ar[r, "\ttick"{marking}, "\geq" below=1pt]
	&
	{[0,\infty)}
		\ar[d, "\alpha"]\ar[r, Rightarrow, yshift=6pt, shorten=1pt]
	&[-10pt]
	E
		\ar[dl, bend left, "\|\blank\|"]
	\\
	{[0,\infty)}\ar[rr, "\ttick"{marking, name=B2}, "\geq" below=1pt]
	&&
	{[0,\infty)}
		\ar[from=A1, to=A2, Rightarrow, shorten=25pt]
		\ar[from=B1.south-|B2, to=B2, Rightarrow, shorten=3pt, "\alpha"]
		\ar[from=C1, to=C2, Rightarrow, shorten=-2pt]
		\ar[from=D1, to=D1|-D2, pos=.3, phantom, "\Uparrow?"]
\end{tikzcd}
\]

The lefthand 2-cell is by adjunction; the bottom 2-cell is the identity on $\alpha$. Suppose given class-$\Kdag$-stability, which is the right-hand 2-cell. Then for all $\epsilon\in(0,\infty)$ and $(t,e)\in T\times E$, and suppressing the inclusions $i$, we obtain classical stability:
\[
  \Delta(\epsilon)\geq \|e\|
  \quad\implies\quad
	\epsilon\geq\|\Phi(t,e)\|.
\]


\end{document}
